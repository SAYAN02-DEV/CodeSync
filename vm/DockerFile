FROM ubuntu:22.04

ENV DEBIAN_FRONTEND=noninteractive

# Core tools plus Node.js and Python
RUN apt-get update \
 && apt-get install -y --no-install-recommends \
	 bash \
	 ca-certificates \
	 curl \
	 python3 \
	 python3-pip \
	 python3-venv \
	 nodejs \
	 npm \
 && rm -rf /var/lib/apt/lists/*

# Create non-root user
ARG USERNAME=sandbox
ARG USER_UID=1000
ARG USER_GID=1000
RUN groupadd --gid ${USER_GID} ${USERNAME} \
 && useradd --uid ${USER_UID} --gid ${USER_GID} --create-home ${USERNAME} \
 && mkdir -p /home/${USERNAME}/project

# Switch to non-root user
USER ${USERNAME}
WORKDIR /home/${USERNAME}/project
ENV HOME=/home/${USERNAME}

CMD ["/bin/bash"]

